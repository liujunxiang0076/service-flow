# ServiceFlow 服务管理平台 - 功能规划文档

## 一、项目概述

ServiceFlow 是一个专业的企业级服务编排与监控管理平台，为 DevOps 团队提供统一的服务生命周期管理、依赖编排、健康监控和日志分析能力。

**目标用户**：开发团队、运维工程师、系统管理员

**核心价值**：

- 统一管理多种类型服务（Tomcat、Redis、Nginx、MySQL、Node.js、批处理等）
- 可视化依赖关系和服务编排
- 实时监控服务健康状态和系统资源
- 集中化日志管理和分析

---

## 二、核心功能模块

### 1. 仪表盘 (Dashboard)

**路径**：`/`

**功能特性**：

- **实时服务统计概览**
  - 总服务数量
  - 运行中服务数
  - 服务分组数量
  - 异常服务告警

- **应用分组展示**
  - 每个应用下的服务分组层级显示
  - 快速启动 / 停止应用
  - 服务状态可视化（颜色或图标区分状态）

- **最近活动日志**
  - 服务状态变更记录（启动 / 停止 / 重启 / 异常）
  - 操作历史追踪（操作人、时间、结果）

**用户价值**：

- 一目了然掌握整体服务运行状态
- 快速定位异常服务
- 提供系统健康度概览

---

### 2. 应用管理 (Applications)

**路径**：`/applications`

**功能特性**：

- **应用列表展示**
  - 卡片式布局，统一尺寸
  - 显示应用图标、名称、描述
  - 服务分组数量统计
  - 服务总数统计
  - 应用整体运行状态（全部正常 / 部分异常等）

- **应用操作**
  - 创建新应用（支持图标选择 / 上传）
  - 编辑应用信息（名称、描述、图标等）
  - 删除应用（带确认提示）
  - 批量启动 / 停止应用下所有服务

- **服务分组查看**
  - 点击分组数量查看详细列表
  - 展示分组包含的具体服务及状态

**用户价值**：

- 按业务应用维度组织服务
- 统一管理相关服务集合
- 支持复杂微服务架构的业务视图

---

### 3. 服务分组管理 (Groups)

**路径**：`/groups`

**功能特性**：

- **分组列表管理**
  - 展示所有服务分组
  - 分组运行状态统计（正常 / 异常）
  - 分组内服务数量显示

- **分组操作**
  - 创建分组（必须选择所属应用）
  - 编辑分组名称、描述等信息
  - 删除分组（带确认提示）
  - 批量启动 / 停止分组内服务

- **服务详情查看**
  - 展开查看分组内所有服务
  - 服务状态实时更新
  - 对单个服务进行快捷控制（启动 / 停止 / 重启）

**用户价值**：

- 逻辑分组管理相关服务
- 支持按功能模块组织服务
- 简化批量操作流程

---

### 4. 服务管理 (Services)

**路径**：`/services`

**功能特性**：

- **服务列表**
  - 表格形式展示所有服务
  - 显示服务名称、类型、状态、端口、PID
  - 所属应用和分组信息
  - 依赖数量统计

- **筛选和搜索**
  - 按应用筛选
  - 按状态筛选（运行中 / 已停止 / 错误）
  - 按服务类型筛选
  - 关键词搜索（按名称、描述等）

- **批量操作**
  - 多选服务
  - 批量启动 / 停止 / 重启
  - 支持全选 / 取消全选

- **服务控制**
  - 启动服务
  - 停止服务
  - 重启服务
  - 查看详情
  - 编辑配置
  - 删除服务（带确认）

- **创建服务（智能配置）**
  - **服务类型选择（预设类型）**
    - Tomcat  
    - Redis  
    - Nginx  
    - MySQL  
    - Node.js  
    - 批处理 (.bat)  
    - Shell 脚本 (.sh)  
    - Python  
    - 自定义
  - **自动填充配置模板**
    - 根据服务类型预填充常用启动命令和参数
  - **文件 / 文件夹选择器**
    - 可视化选择可执行文件和工作目录
  - **基本信息配置**
    - 服务名称
    - 显示名称
    - 描述
    - 所属分组
  - **执行配置**
    - 可执行文件路径（带文件选择器）
    - 启动参数
    - 工作目录（带文件夹选择器）
    - 环境变量配置
    - 端口配置
  - **启动选项**
    - 是否自动启动
    - 启动延迟时间
    - 启动重试次数
    - 依赖服务选择（从列表勾选依赖）

**用户价值**：

- 统一管理不同类型服务
- 简化服务配置与创建流程
- 支持复杂启动场景
- 提供批量操作能力

---

### 5. 依赖关系管理 (Dependencies)

**路径**：`/dependencies`

**功能特性**：

- 支持三个视图模式：依赖图 / 依赖列表 / 依赖管理

#### 5.1 依赖图 (Dependency Graph)

- Canvas 可视化展示依赖关系
- 节点表示服务分组或关键服务
- 箭头表示依赖方向
- 点击节点查看详情（包含服务列表、状态）
- 颜色编码服务 / 分组状态（正常 / 警告 / 异常）

#### 5.2 依赖列表 (Dependency List)

- 表格形式展示每个分组的依赖信息
- 显示依赖链路（前置 / 后置分组）
- 标记循环依赖
- 展示自动启动顺序
- 展示分组下服务列表及状态汇总

#### 5.3 依赖管理 (Dependency Manager)

- **添加依赖关系**
  - 选择源分组
  - 选择目标分组
  - 循环依赖检测提示
  - 分组详情预览
- **编辑依赖**
  - 调整依赖顺序
  - 上移 / 下移排序
- **删除依赖**
  - 删除单条依赖（带确认）
- **依赖统计**
  - 统计依赖深度、扇出、扇入等信息

**用户价值**：

- 清晰了解服务间依赖关系
- 避免循环依赖问题
- 确保正确的启动顺序
- 降低服务编排复杂度

---

### 6. 健康检查 (Health Check)

**路径**：`/health`

**功能特性**：

- 通过两个监控视图：服务健康 / 服务器健康

#### 6.1 服务健康 (Service Health)

- **健康状态总览**
  - 健康服务数
  - 警告服务数
  - 异常服务数
  - 未检查服务数

- **服务级健康监控**
  - 每个服务的健康状态
  - 最后检查时间
  - 响应时间
  - 健康检查类型（HTTP / TCP / 命令）

- **配置健康检查**
  - HTTP 检查：URL + 期望状态码
  - TCP 检查：主机 + 端口
  - 命令检查：执行脚本或命令
  - 检查间隔设置
  - 超时配置
  - 重试次数设置

#### 6.2 服务器健康 (Server Health)

- **系统资源监控**
  - CPU 使用率（实时图表）
  - 内存使用率（总量 / 已用 / 可用）
  - 磁盘使用率（各分区）
  - 网络流量（上传 / 下载）

- **系统信息**
  - 操作系统版本
  - 主机名
  - 运行时长
  - 处理器信息

- **硬件配置**
  - CPU 核心数
  - 总内存容量
  - 磁盘总容量

**用户价值**：

- 实时监控服务可用性
- 及时发现性能问题
- 掌握系统资源状况
- 预防资源耗尽与宕机风险

---

### 7. 日志管理 (Logs)

**路径**：`/logs`

**功能特性**：

- **实时日志查看器**
  - 日志流式显示
  - 自动滚动到底部
  - 日志级别颜色编码
  - 时间戳显示

- **日志筛选**
  - 按服务筛选
  - 按日志级别筛选（INFO / WARN / ERROR / DEBUG）
  - 关键词搜索
  - 时间范围筛选

- **日志操作**
  - 手动刷新
  - 一键清空当前显示
  - 导出日志文件
  - 自动滚动开关

- **日志配置**
  - 获取模式设置：
    - 实时获取
    - 定期获取（可设置间隔）
    - 手动获取
  - 日志保留策略（按时间 / 按大小）
  - 日志级别过滤默认策略

**用户价值**：

- 集中查看所有服务日志
- 快速定位错误信息
- 支持日志分析和审计
- 灵活的日志获取与保留策略

---

### 8. 系统设置 (Settings)

**路径**：`/settings`

**功能特性**：

- 由多个设置标签页组成（可扩展）

#### 8.1 Web 服务配置

- 服务端口
- HTTPS 开关
- 证书配置（证书路径、私钥路径等）

#### 8.2 认证与安全

- **用户管理**
  - 用户列表
  - 添加 / 编辑 / 删除用户
  - 角色与权限设置
- **会话配置**
  - 会话超时时间
  - “记住登录”配置
- **IP 白名单**
  - 添加允许访问的 IP
  - 支持 IP 段配置

#### 8.3 系统配置

- 日志级别设置
- 日志保留时间配置
- 备份策略基础设置

#### 8.4 备份与恢复

- **自动备份配置**
  - 备份频率
  - 保留份数
- 立即备份
- 从备份恢复
- 查看备份历史记录

#### 8.5 导出配置

- **选择性导出**
  - 应用配置
  - 服务分组配置
  - 服务配置
  - 依赖关系配置
  - 健康检查配置
  - 系统设置
- 导出为 JSON 格式
- 导入配置支持（带冲突处理策略）

**用户价值**：

- 灵活的系统配置能力
- 安全的访问控制
- 数据与配置备份保护
- 支持环境迁移与快速复制

---

### 9. 用户认证 (Authentication)

**路径**：`/login`

**功能特性**：

- **登录界面**
  - 用户名 / 密码登录
  - “记住我”选项
  - 登录状态保持反馈

- **会话管理**
  - 自动超时登出
  - 会话刷新机制

- **权限控制**
  - 基于角色的访问控制（管理员 / 只读 / 运维等）
  - 页面级、功能级权限验证

**用户价值**：

- 保护系统安全
- 防止未授权访问
- 支持多用户协作与分权管理

---

## 三、用户体验优化

### 10. 全局功能

**主题系统**

- 深色主题（默认，适合长时间监控）
- 浅色主题
- 一键切换
- 主题偏好持久化（本地存储或用户级配置）

**侧边栏**

- 可折叠设计
- 折叠后显示图标
- Tooltip 提示菜单名称
- 显示当前用户信息
- 快速导航到常用模块

**通知系统**

- Toast 通知
- 操作成功 / 失败反馈
- 错误提示信息
- 关键操作确认对话框

**批量操作**

- 多选支持（列表 / 表格）
- 批量启动 / 停止 / 重启
- 二次确认，避免误操作

**Tooltip 提示**

- 所有图标按钮提供 Tooltip
- 简要说明按钮功能
- 可显示相关快捷键

**服务模板**

- 针对常见服务类型提供模板
- 自动配置部分字段
- 给出最佳实践建议（例如日志目录、启动参数）

**响应式设计**

- 桌面端优先优化
- 平板适配布局
- 提供基础的移动端访问支持（只读或部分操作）

---